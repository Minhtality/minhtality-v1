"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addHeadersToResponse = void 0;
const matcher_1 = require("../routing/matcher");
const locale_utils_1 = require("../routing/locale-utils");
function addHeadersToResponse(path, response, routesManifest) {
    path = locale_utils_1.addDefaultLocaleToPath(path, routesManifest);
    if (response.headers) {
        for (const headerData of routesManifest.headers) {
            const match = matcher_1.matchPath(path, headerData.source);
            if (match) {
                for (const header of headerData.headers) {
                    if (header.key && header.value) {
                        const headerLowerCase = header.key.toLowerCase();
                        response.headers[headerLowerCase] = [
                            {
                                key: headerLowerCase,
                                value: header.value
                            }
                        ];
                    }
                }
            }
        }
    }
}
exports.addHeadersToResponse = addHeadersToResponse;
