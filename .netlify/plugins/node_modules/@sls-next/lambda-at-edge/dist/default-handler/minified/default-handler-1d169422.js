"use strict";var e=require("./prerender-manifest.json"),t=require("./manifest.json"),r=require("./routes-manifest.json"),n=require("stream"),o=require("zlib"),i=require("http"),a=require("perf_hooks"),s=require("buffer"),u=require("util"),c=require("crypto");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var p=f(e),d=f(t),h=f(r),m=f(n),y=f(o),g=f(i),v=l(i),b=f(s),w=f(u),S=f(c);const E={"accept-encoding":!0,"content-length":!0,"if-modified-since":!0,"if-none-match":!0,"if-range":!0,"if-unmodified-since":!0,"transfer-encoding":!0,via:!0},j={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},x={enableHTTPCompression:!1},C=(e,{enableHTTPCompression:t,rewrittenUri:r}=x)=>{const{request:n,response:o={headers:{}}}=e,i={headers:{}},a=new m.default.Readable,s=Object.assign(a,g.default.IncomingMessage.prototype);s.url=r||n.uri,s.method=n.method,s.rawHeaders=[],s.headers={},s.connection={},n.querystring&&(s.url=s.url+"?"+n.querystring);const u=n.headers||{};for(const e of Object.keys(u)){const t=u[e];t.forEach((e=>{s.rawHeaders.push(e.key),s.rawHeaders.push(e.value)})),s.headers[e]=t[0].value}s.getHeader=e=>s.headers[e.toLowerCase()],s.getHeaders=()=>s.headers,n.body&&n.body.data&&s.push(n.body.data,n.body.encoding?"base64":void 0),s.push(null);const c=new m.default;c.finished=!1,Object.defineProperty(c,"statusCode",{get:()=>i.status,set(e){i.status=e,i.statusDescription=j[e]}}),c.headers={},c.writeHead=(e,t)=>(i.status=e,t&&(c.headers=Object.assign(c.headers,t)),c),c.write=e=>{i.body||(i.body=Buffer.from("")),i.body=Buffer.concat([i.body,Buffer.isBuffer(e)?e:Buffer.from(e)])};let f=t&&(e=>{let t=!1;const r=e["accept-encoding"];if(r)for(let e=0;e<r.length;e++){const{value:n}=r[e];-1!==n.split(",").map((e=>e.split(";")[0].trim())).indexOf("gzip")&&(t=!0)}return t})(u);const l=new Promise((e=>{c.end=t=>{!0!==c.finished&&(c.finished=!0,t&&c.write(t),c.statusCode||(c.statusCode=200),i.body&&(i.bodyEncoding="base64",i.body=f?y.default.gzipSync(i.body).toString("base64"):Buffer.from(i.body).toString("base64")),i.headers=((e,t)=>{const r={},n={};return Object.entries(t).forEach((([e,t])=>{n[e.toLowerCase()]=t})),Object.keys(e).forEach((t=>{const o=t.toLowerCase(),i=e[t];E[o]?n[o]&&(r[o]=n[o]):(r[o]=[],i instanceof Array?i.forEach((e=>{r[o].push({key:t,value:e.toString()})})):r[o].push({key:t,value:i.toString()}))})),r})(c.headers,o.headers),f&&(i.headers["content-encoding"]=[{key:"Content-Encoding",value:"gzip"}]),e(i))}}));return c.setHeader=(e,t)=>{c.headers[e.toLowerCase()]=t},c.removeHeader=e=>{delete c.headers[e.toLowerCase()]},c.getHeader=e=>c.headers[e.toLowerCase()],c.getHeaders=()=>c.headers,c.hasHeader=e=>!!c.getHeader(e),{req:s,res:c,responsePromise:l}};C.SPECIAL_NODE_HEADERS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var T=C;function O(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var o=1,i="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);i+=e[s++]}else i+=e[s++]+e[s++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=s}else{for(var a="",s=r+1;s<e.length;){var u=e.charCodeAt(s);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,o=void 0===n?"./":n,i="[^"+P(t.delimiter||"/#?")+"]+?",a=[],s=0,u=0,c="",f=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},l=function(e){var t=f(e);if(void 0!==t)return t;var n=r[u],o=n.type,i=n.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+e)},p=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var d=f("CHAR"),h=f("NAME"),m=f("PATTERN");if(h||m){var y=d||"";-1===o.indexOf(y)&&(c+=y,y=""),c&&(a.push(c),c=""),a.push({name:h||s++,prefix:y,suffix:"",pattern:m||i,modifier:f("MODIFIER")||""})}else{var g=d||f("ESCAPED_CHAR");if(g)c+=g;else if(c&&(a.push(c),c=""),f("OPEN")){y=p();var v=f("NAME")||"",b=f("PATTERN")||"",w=p();l("CLOSE"),a.push({name:v||(b?s++:""),pattern:v&&!b?i:b,prefix:y,suffix:w,modifier:f("MODIFIER")||""})}else l("END")}}return a}function R(e,t){return function(e,t){void 0===t&&(t={});var r=q(t),n=t.encode,o=void 0===n?function(e){return e}:n,i=t.validate,a=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var u=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,f="*"===i.modifier||"+"===i.modifier;if(Array.isArray(u)){if(!f)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var l=0;l<u.length;l++){var p=o(u[l],i);if(a&&!s[n].test(p))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var d=f?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+d)}}else{p=o(String(u),i);if(a&&!s[n].test(p))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else r+=i}return r}}(O(e,t),t)}function A(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,s=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?s[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return o(e,r)})):s[r.name]=o(n[e],r)},c=1;c<n.length;c++)u(c);return{path:i,index:a,params:s}}}($(e,r,t),r,t)}function P(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function q(e){return e&&e.sensitive?"":"i"}function k(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,i=r.start,a=void 0===i||i,s=r.end,u=void 0===s||s,c=r.encode,f=void 0===c?function(e){return e}:c,l="["+P(r.endsWith||"")+"]|$",p="["+P(r.delimiter||"/#?")+"]",d=a?"^":"",h=0,m=e;h<m.length;h++){var y=m[h];if("string"==typeof y)d+=P(f(y));else{var g=P(f(y.prefix)),v=P(f(y.suffix));if(y.pattern)if(t&&t.push(y),g||v)if("+"===y.modifier||"*"===y.modifier){var b="*"===y.modifier?"?":"";d+="(?:"+g+"((?:"+y.pattern+")(?:"+v+g+"(?:"+y.pattern+"))*)"+v+")"+b}else d+="(?:"+g+"("+y.pattern+")"+v+")"+y.modifier;else d+="("+y.pattern+")"+y.modifier;else d+="(?:"+g+v+")"+y.modifier}}if(u)o||(d+=p+"?"),d+=r.endsWith?"(?="+l+")":"$";else{var w=e[e.length-1],S="string"==typeof w?p.indexOf(w[w.length-1])>-1:void 0===w;o||(d+="(?:"+p+"(?="+l+"))?"),S||(d+="(?="+p+"|"+l+")")}return new RegExp(d,q(r))}(O(e,r),t,r)}function $(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return $(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",q(r))}(e,t,r):k(e,t,r)}function B(e,t){return A(t,{decode:decodeURIComponent})(e)}function I(e,t){try{const r=e.toLowerCase();if(r.startsWith("https://")||r.startsWith("http://")){const{origin:r,pathname:n}=new URL(e),o=`${r}${R(n,{encode:encodeURIComponent})(t)}`;return!e.endsWith("/")&&o.endsWith("/")?o.slice(0,-1):o}{const r=e.replace(/\?/g,"\\?");return R(r,{encode:encodeURIComponent})(t)}}catch(t){return console.error(`Could not compile destination ${e}, returning null instead. Error: ${t}`),null}}function M(e,t){if(t.i18n){const r=t.i18n.defaultLocale,n=t.i18n.locales,o=t.basePath;for(const r of n)if(e===`${t.basePath}/${r}`||e.startsWith(`${t.basePath}/${r}/`))return e;return"/"===e||e===""+o?`${o}/${r}`:e.replace(o+"/",`${o}/${r}/`)}return e}function N(e,t){if(t.i18n)for(const r of t.i18n.locales)if(e==="/"+r||e.startsWith(`/${r}/`))return!0;return!1}function D(e,t){if(t.i18n)for(const r of t.i18n.locales)if(e==="/"+r||e.startsWith(`/${r}/`))return"/"+r;return""}function H(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var _=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}},L=H((function(e,t){e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:_(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}})),U=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new L(t)}};const W={};var z=function(e,t,r){if(!1===t||null==t)return e;"string"==typeof(r=r||{})&&(r={separator:r});const n=Array.isArray(t);U(!n||!r.separator,"Separator option no valid for array-based chain");const o=n?t:t.split(r.separator||".");let i=e;for(let e=0;e<o.length;++e){let n=o[e];const a=r.iterables&&W.iterables(i);if(Array.isArray(i)||"set"===a){const e=Number(n);Number.isInteger(e)&&(n=e<0?i.length+e:e)}if(!i||"function"==typeof i&&!1===r.functions||!a&&void 0===i[n]){U(!r.strict||e+1===o.length,"Missing segment",n,"in reach path ",t),U("object"==typeof i||!0===r.functions||"function"!=typeof i,"Invalid segment",n,"in reach path ",t),i=r.default;break}i=a?"set"===a?[...i][n]:i.get(n):i[n]}return i};W.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0};var F=H((function(e,t){const r={};t=e.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},r.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(Buffer&&e instanceof Buffer)return t.buffer;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return r.typeMap.get(n)||t.generic}})),G=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)};const K={needsProtoHack:new Set([F.set,F.map,F.weakSet,F.weakMap])};var V=K.clone=function(e,t={},r=null){if("object"!=typeof e||null===e)return e;let n=K.clone,o=r;if(t.shallow){if(!0!==t.shallow)return K.cloneWithShallow(e,t);n=e=>e}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const i=F.getInternalProto(e);if(i===F.buffer)return Buffer&&Buffer.from(e);if(i===F.date)return new Date(e.getTime());if(i===F.regex)return new RegExp(e);const a=K.base(e,i,t);if(a===e)return e;if(o&&o.set(e,a),i===F.set)for(const r of e)a.add(n(r,t,o));else if(i===F.map)for(const[r,i]of e)a.set(r,n(i,t,o));const s=G(e,t);for(const r of s){if("__proto__"===r)continue;if(i===F.array&&"length"===r){a.length=e.length;continue}const s=Object.getOwnPropertyDescriptor(e,r);s?s.get||s.set?Object.defineProperty(a,r,s):s.enumerable?a[r]=n(e[r],t,o):Object.defineProperty(a,r,{enumerable:!1,writable:!0,configurable:!0,value:n(e[r],t,o)}):Object.defineProperty(a,r,{enumerable:!0,writable:!0,configurable:!0,value:n(e[r],t,o)})}return a};K.cloneWithShallow=function(e,t){const r=t.shallow;(t=Object.assign({},t)).shallow=!1;const n=new Map;for(const t of r){const r=z(e,t);"object"!=typeof r&&"function"!=typeof r||n.set(r,r)}return K.clone(e,t,n)},K.base=function(e,t,r){if(!1===r.prototype)return K.needsProtoHack.has(t)?new t.constructor:t===F.array?[]:{};const n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===F.array){const e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(K.needsProtoHack.has(t)){const e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)};const J={};var Z=J.merge=function(e,t,r){if(U(e&&"object"==typeof e,"Invalid target value: must be an object"),U(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(r=Object.assign({nullOverride:!0,mergeArrays:!0},r),Array.isArray(t)){U(Array.isArray(e),"Cannot merge array onto an object"),r.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(V(t[n],{symbols:r.symbols}));return e}const n=G(t,r);for(let o=0;o<n.length;++o){const i=n[o];if("__proto__"===i||!Object.prototype.propertyIsEnumerable.call(t,i))continue;const a=t[i];if(a&&"object"==typeof a){if(e[i]===a)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(a)||a instanceof Date||Buffer&&Buffer.isBuffer(a)||a instanceof RegExp?e[i]=V(a,{symbols:r.symbols}):J.merge(e[i],a,r)}else(null!=a||r.nullOverride)&&(e[i]=a)}return e};const X={};X.applyToDefaultsWithShallow=function(e,t,r){const n=r.shallow;U(Array.isArray(n),"Invalid keys");const o=new Map,i=!0===t?null:new Set;for(let r of n){r=Array.isArray(r)?r:r.split(".");const n=z(e,r);n&&"object"==typeof n?o.set(n,i&&z(t,r)||n):i&&i.add(r)}const a=V(e,{},o);if(!i)return a;for(const e of i)X.reachCopy(a,t,e);return Z(a,t,{mergeArrays:!1,nullOverride:!1})},X.reachCopy=function(e,t,r){for(const e of r){if(!(e in t))return;t=t[e]}const n=t;let o=e;for(let e=0;e<r.length-1;++e){const t=r[e];"object"!=typeof o[t]&&(o[t]={}),o=o[t]}o[r[r.length-1]]=n};const Q={};var Y=Q.Bench=class{constructor(){this.ts=0,this.reset()}reset(){this.ts=Q.Bench.now()}elapsed(){return Q.Bench.now()-this.ts}static now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},ee=function(){};const te={mismatched:null};var re=function(e,t,r){return r=Object.assign({prototype:!0},r),!!te.isDeepEqual(e,t,r,[])};te.isDeepEqual=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;const o=typeof e;if(o!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===o){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==o)return e!=e&&t!=t;const i=te.getSharedType(e,t,!!r.prototype);switch(i){case F.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case F.promise:return e===t;case F.regex:return e.toString()===t.toString();case te.mismatched:return!1}for(let r=n.length-1;r>=0;--r)if(n[r].isSame(e,t))return!0;n.push(new te.SeenEntry(e,t));try{return!!te.isDeepEqualObj(i,e,t,r,n)}finally{n.pop()}},te.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?te.mismatched:F.getInternalProto(e);const n=F.getInternalProto(e);return n!==F.getInternalProto(t)?te.mismatched:n},te.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},te.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},te.isSetSimpleEqual=function(e,t){for(const r of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,r))return!1;return!0},te.isDeepEqualObj=function(e,t,r,n,o){const{isDeepEqual:i,valueOf:a,hasOwnEnumerableProperty:s}=te,{keys:u,getOwnPropertySymbols:c}=Object;if(e===F.array){if(!n.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],n,o))return!1;return!0}for(const e of t)for(const t of r)if(i(e,t,n,o))return!0}else if(e===F.set){if(t.size!==r.size)return!1;if(!te.isSetSimpleEqual(t,r)){const e=new Set(Set.prototype.values.call(r));for(const r of Set.prototype.values.call(t)){if(e.delete(r))continue;let t=!1;for(const a of e)if(i(r,a,n,o)){e.delete(a),t=!0;break}if(!t)return!1}}}else if(e===F.map){if(t.size!==r.size)return!1;for(const[e,a]of Map.prototype.entries.call(t)){if(void 0===a&&!Map.prototype.has.call(r,e))return!1;if(!i(a,Map.prototype.get.call(r,e),n,o))return!1}}else if(e===F.error&&(t.name!==r.name||t.message!==r.message))return!1;const f=a(t),l=a(r);if((t!==f||r!==l)&&!i(f,l,n,o))return!1;const p=u(t);if(!n.part&&p.length!==u(r).length&&!n.skip)return!1;let d=0;for(const e of p)if(n.skip&&n.skip.includes(e))void 0===r[e]&&++d;else{if(!s(r,e))return!1;if(!i(t[e],r[e],n,o))return!1}if(!n.part&&p.length-d!==u(r).length)return!1;if(!1!==n.symbols){const e=c(t),a=new Set(c(r));for(const u of e){if(!n.skip||!n.skip.includes(u))if(s(t,u)){if(!s(r,u))return!1;if(!i(t[u],r[u],n,o))return!1}else if(s(r,u))return!1;a.delete(u)}for(const e of a)if(s(r,e))return!1}return!0},te.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};var ne=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};const oe={};oe.array=function(e,t,r){if(Array.isArray(t)||(t=[t]),!e.length)return!1;if(r.only&&r.once&&e.length!==t.length)return!1;let n;const o=new Map;for(const e of t)if(r.deep&&e&&"object"==typeof e){n=n||oe.compare(r);let t=!1;for(const[r,i]of o.entries())if(n(r,e)){++i.allowed,t=!0;break}t||o.set(e,{allowed:1,hits:0})}else{const t=o.get(e);t?++t.allowed:o.set(e,{allowed:1,hits:0})}let i=0;for(const t of e){let e;if(r.deep&&t&&"object"==typeof t){n=n||oe.compare(r);for(const[r,i]of o.entries())if(n(r,t)){e=i;break}}else e=o.get(t);if(e&&(++e.hits,++i,r.once&&e.hits>e.allowed))return!1}if(r.only&&i!==e.length)return!1;for(const e of o.values())if(e.hits!==e.allowed&&e.hits<e.allowed&&!r.part)return!1;return!!i},oe.object=function(e,t,r){U(void 0===r.once,"Cannot use option once with object");const n=G(e,r);if(!n.length)return!1;if(Array.isArray(t))return oe.array(n,t,r);const o=Object.getOwnPropertySymbols(t).filter((e=>t.propertyIsEnumerable(e))),i=[...Object.keys(t),...o],a=oe.compare(r),s=new Set(i);for(const o of n)if(s.has(o)){if(!a(t[o],e[o]))return!1;s.delete(o)}else if(r.only)return!1;return!s.size||!!r.part&&s.size<i.length},oe.string=function(e,t,r){if(""===e)return 1===t.length&&""===t[0]||!r.once&&!t.some((e=>""!==e));const n=new Map,o=[];for(const e of t)if(U("string"==typeof e,"Cannot compare string reference to non-string value"),e){const t=n.get(e);t?++t.allowed:(n.set(e,{allowed:1,hits:0}),o.push(ne(e)))}else if(r.once||r.only)return!1;if(!o.length)return!0;const i=new RegExp(`(${o.join("|")})`,"g"),a=e.replace(i,((e,t)=>(++n.get(t).hits,"")));if(r.only&&a)return!1;let s=!1;for(const e of n.values())if(e.hits&&(s=!0),e.hits!==e.allowed){if(e.hits<e.allowed&&!r.part)return!1;if(r.once)return!1}return!!s},oe.compare=function(e){if(!e.deep)return oe.shallow;const t=void 0!==e.only,r=void 0!==e.part,n={prototype:t?e.only:!!r&&!e.part,part:t?!e.only:!!r&&e.part};return(e,t)=>re(e,t,n)},oe.shallow=function(e,t){return e===t};const ie={};ie.escapeHtmlChar=function(e){const t=ie.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";return`&#x${e.toString(16).padStart(2,"0")};`},ie.isSafe=function(e){return void 0!==ie.safeCharCodes[e]},ie.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},ie.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}();const ae={};var se=ae.flatten=function(e,t){const r=t||[];for(let t=0;t<e.length;++t)Array.isArray(e[t])?ae.flatten(e[t],r):r.push(e[t]);return r};const ue={};ue.has=function(e,t){return"function"==typeof e.has?e.has(t):void 0!==e[t]};var ce={applyToDefaults:function(e,t,r={}){if(U(e&&"object"==typeof e,"Invalid defaults value: must be an object"),U(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),U("object"==typeof r,"Invalid options: must be an object"),!t)return null;if(r.shallow)return X.applyToDefaultsWithShallow(e,t,r);const n=V(e);if(!0===t)return n;const o=void 0!==r.nullOverride&&r.nullOverride;return Z(n,t,{nullOverride:o,mergeArrays:!1})},assert:U,Bench:Y,block:function(){return new Promise(ee)},clone:V,contain:function(e,t,r={}){return"object"!=typeof t&&(t=[t]),U(!Array.isArray(t)||t.length,"Values array cannot be empty"),"string"==typeof e?oe.string(e,t,r):Array.isArray(e)?oe.array(e,t,r):(U("object"==typeof e,"Reference must be string or an object"),oe.object(e,t,r))},deepEqual:re,Error:L,escapeHeaderAttribute:function(e){return U(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},escapeHtml:function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);ie.isSafe(n)?t+=e[r]:t+=ie.escapeHtmlChar(n)}return t},escapeJson:function(e){if(!e)return"";let t;return e.replace(/[<>&\u2028\u2029]/g,(e=>(t=e.charCodeAt(0),60===t?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029")))},escapeRegex:ne,flatten:se,ignore:ee,intersect:function(e,t,r={}){if(!e||!t)return r.first?null:[];const n=[],o=Array.isArray(e)?new Set(e):e,i=new Set;for(const e of t)if(ue.has(o,e)&&!i.has(e)){if(r.first)return e;n.push(e),i.add(e)}return r.first?null:n},isPromise:function(e){return!!e&&"function"==typeof e.then},merge:Z,once:function(e){if(e._hoekOnce)return e;let t=!1;const r=function(...r){t||(t=!0,e(...r))};return r._hoekOnce=!0,r},reach:z,reachTemplate:function(e,t,r){return t.replace(/{([^}]+)}/g,((t,n)=>{const o=z(e,n,r);return null==o?"":o}))},stringify:_,wait:function(e,t){if("number"!=typeof e&&void 0!==e)throw new TypeError("Timeout must be a number");return new Promise((r=>setTimeout(r,e,t)))}},fe=H((function(e,t){const r={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};t.Boom=class extends Error{constructor(e,n={}){if(e instanceof Error)return t.boomify(ce.clone(e),n);const{statusCode:o=500,data:i=null,ctor:a=t.Boom}=n,s=new Error(e||void 0);Error.captureStackTrace(s,a),s.data=i;const u=r.initialize(s,o);return Object.defineProperty(u,"typeof",{value:a}),n.decorate&&Object.assign(u,n.decorate),u}static[Symbol.hasInstance](e){return t.isBoom(e)}},t.isBoom=function(e,t){return e instanceof Error&&!!e.isBoom&&(!t||e.output.statusCode===t)},t.boomify=function(e,t){return ce.assert(e instanceof Error,"Cannot wrap non-Error object"),void 0!==(t=t||{}).data&&(e.data=t.data),t.decorate&&Object.assign(e,t.decorate),e.isBoom?!1===t.override||!t.statusCode&&!t.message?e:r.initialize(e,t.statusCode||e.output.statusCode,t.message):r.initialize(e,t.statusCode||500,t.message)},t.badRequest=function(e,r){return new t.Boom(e,{statusCode:400,data:r,ctor:t.badRequest})},t.unauthorized=function(e,r,n){const o=new t.Boom(e,{statusCode:401,ctor:t.unauthorized});if(!r)return o;if("string"!=typeof r)return o.output.headers["WWW-Authenticate"]=r.join(", "),o;let i=""+r;return(n||e)&&(o.output.payload.attributes={}),n&&("string"==typeof n?(i+=" "+ce.escapeHeaderAttribute(n),o.output.payload.attributes=n):i+=" "+Object.keys(n).map((e=>{let t=n[e];return null==t&&(t=""),o.output.payload.attributes[e]=t,`${e}="${ce.escapeHeaderAttribute(t.toString())}"`})).join(", ")),e?(n&&(i+=","),i+=` error="${ce.escapeHeaderAttribute(e)}"`,o.output.payload.attributes.error=e):o.isMissing=!0,o.output.headers["WWW-Authenticate"]=i,o},t.paymentRequired=function(e,r){return new t.Boom(e,{statusCode:402,data:r,ctor:t.paymentRequired})},t.forbidden=function(e,r){return new t.Boom(e,{statusCode:403,data:r,ctor:t.forbidden})},t.notFound=function(e,r){return new t.Boom(e,{statusCode:404,data:r,ctor:t.notFound})},t.methodNotAllowed=function(e,r,n){const o=new t.Boom(e,{statusCode:405,data:r,ctor:t.methodNotAllowed});return"string"==typeof n&&(n=[n]),Array.isArray(n)&&(o.output.headers.Allow=n.join(", ")),o},t.notAcceptable=function(e,r){return new t.Boom(e,{statusCode:406,data:r,ctor:t.notAcceptable})},t.proxyAuthRequired=function(e,r){return new t.Boom(e,{statusCode:407,data:r,ctor:t.proxyAuthRequired})},t.clientTimeout=function(e,r){return new t.Boom(e,{statusCode:408,data:r,ctor:t.clientTimeout})},t.conflict=function(e,r){return new t.Boom(e,{statusCode:409,data:r,ctor:t.conflict})},t.resourceGone=function(e,r){return new t.Boom(e,{statusCode:410,data:r,ctor:t.resourceGone})},t.lengthRequired=function(e,r){return new t.Boom(e,{statusCode:411,data:r,ctor:t.lengthRequired})},t.preconditionFailed=function(e,r){return new t.Boom(e,{statusCode:412,data:r,ctor:t.preconditionFailed})},t.entityTooLarge=function(e,r){return new t.Boom(e,{statusCode:413,data:r,ctor:t.entityTooLarge})},t.uriTooLong=function(e,r){return new t.Boom(e,{statusCode:414,data:r,ctor:t.uriTooLong})},t.unsupportedMediaType=function(e,r){return new t.Boom(e,{statusCode:415,data:r,ctor:t.unsupportedMediaType})},t.rangeNotSatisfiable=function(e,r){return new t.Boom(e,{statusCode:416,data:r,ctor:t.rangeNotSatisfiable})},t.expectationFailed=function(e,r){return new t.Boom(e,{statusCode:417,data:r,ctor:t.expectationFailed})},t.teapot=function(e,r){return new t.Boom(e,{statusCode:418,data:r,ctor:t.teapot})},t.badData=function(e,r){return new t.Boom(e,{statusCode:422,data:r,ctor:t.badData})},t.locked=function(e,r){return new t.Boom(e,{statusCode:423,data:r,ctor:t.locked})},t.failedDependency=function(e,r){return new t.Boom(e,{statusCode:424,data:r,ctor:t.failedDependency})},t.tooEarly=function(e,r){return new t.Boom(e,{statusCode:425,data:r,ctor:t.tooEarly})},t.preconditionRequired=function(e,r){return new t.Boom(e,{statusCode:428,data:r,ctor:t.preconditionRequired})},t.tooManyRequests=function(e,r){return new t.Boom(e,{statusCode:429,data:r,ctor:t.tooManyRequests})},t.illegal=function(e,r){return new t.Boom(e,{statusCode:451,data:r,ctor:t.illegal})},t.internal=function(e,n,o=500){return r.serverError(e,n,o,t.internal)},t.notImplemented=function(e,n){return r.serverError(e,n,501,t.notImplemented)},t.badGateway=function(e,n){return r.serverError(e,n,502,t.badGateway)},t.serverUnavailable=function(e,n){return r.serverError(e,n,503,t.serverUnavailable)},t.gatewayTimeout=function(e,n){return r.serverError(e,n,504,t.gatewayTimeout)},t.badImplementation=function(e,n){const o=r.serverError(e,n,500,t.badImplementation);return o.isDeveloperError=!0,o},r.initialize=function(e,t,n){const o=parseInt(t,10);if(ce.assert(!isNaN(o)&&o>=400,"First argument must be a number (400+):",t),e.isBoom=!0,e.isServer=o>=500,e.hasOwnProperty("data")||(e.data=null),e.output={statusCode:o,payload:{},headers:{}},Object.defineProperty(e,"reformat",{value:r.reformat}),n||e.message||(e.reformat(),n=e.output.payload.error),n){const t=Object.getOwnPropertyDescriptor(e,"message")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"message");ce.assert(!t||t.configurable&&!t.get,"The error is not compatible with boom"),e.message=n+(e.message?": "+e.message:""),e.output.payload.message=e.message}return e.reformat(),e},r.reformat=function(e=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=r.codes.get(this.output.statusCode)||"Unknown",500===this.output.statusCode&&!0!==e?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)},r.serverError=function(e,r,n,o){return r instanceof Error&&!r.isBoom?t.boomify(r,{statusCode:n,message:e}):new t.Boom(e,{statusCode:n,data:r,ctor:o})}})),le=H((function(e,t){const r={};t.selection=function(e,r,n){const o=t.selections(e,r,n);return o.length?o[0]:""},t.selections=function(e,t,n){return ce.assert(!t||Array.isArray(t),"Preferences must be an array"),r.parse(e||"",t,n)},r.parse=function(e,t,n){const o=e.replace(/[ \t]/g,""),i=new Map;if(t)for(let e=0;e<t.length;++e){const r=t[e];i.set(r.toLowerCase(),{orig:r,pos:e})}const a=o.split(","),s=[],u=new Set;for(let e=0;e<a.length;++e){const r=a[e];if(!r)continue;const o=r.split(";");if(o.length>2)throw fe.badRequest(`Invalid ${n.type} header`);let c=o[0].toLowerCase();if(!c)throw fe.badRequest(`Invalid ${n.type} header`);n.equivalents&&n.equivalents.has(c)&&(c=n.equivalents.get(c));const f={token:c,pos:e,q:1,specificity:n.specificity?c.split("-"):null};if(t&&i.has(c)&&(f.pref=i.get(c).pos),u.add(f.token),2===o.length){const e=o[1],[t,r]=e.split("=");if(!r||"q"!==t&&"Q"!==t)throw fe.badRequest(`Invalid ${n.type} header`);const i=parseFloat(r);if(0===i)continue;Number.isFinite(i)&&i<=1&&i>=.001&&(f.q=i)}s.push(f)}s.sort(r.sort);const c=s.map((e=>e.token));if(n.default&&!u.has(n.default)&&c.push(n.default),!t||!t.length)return c;const f=[];for(const e of c)if("*"===e)for(const[e,t]of i)u.has(e)||f.push(t.orig);else{const t=e.toLowerCase();i.has(t)&&f.push(i.get(t).orig)}return f},r.sort=function(e,t){return t.q!==e.q?t.q-e.q:t.pref!==e.pref?void 0===e.pref?1:void 0===t.pref?-1:e.pref-t.pref:e.specificity&&e.specificity[0]===t.specificity[0]&&e.specificity.length!==t.specificity.length?t.specificity.length-e.specificity.length:e.pos-t.pos}})),pe=H((function(e,t){const r={};t.selection=function(e,r){const n=t.selections(e,r);return n.length?n[0]:""},t.selections=function(e,t){return ce.assert(!t||Array.isArray(t),"Preferences must be an array"),r.parse(e,t)},r.validMediaRx=/^(?:\*\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/\*)|(?:[\w\!#\$%&'\*\+\-\.\^`\|~]+\/[\w\!#\$%&'\*\+\-\.\^`\|~]+)$/,r.parse=function(e,t){const{header:n,quoted:o}=r.normalize(e),i=n.split(","),a=[],s={};for(let e=0;e<i.length;++e){const t=i[e];if(!t)continue;const n=t.split(";"),u=n.shift().toLowerCase();if(!r.validMediaRx.test(u))continue;const c={token:u,params:{},exts:{},pos:e};let f="params";for(const e of n){const t=e.split("=");if(2!==t.length||!t[1])throw fe.badRequest("Invalid accept header");const r=t[0];let n=t[1];"q"===r||"Q"===r?(f="exts",n=parseFloat(n),(!Number.isFinite(n)||n>1||n<.001&&0!==n)&&(n=1),c.q=n):('"'===n[0]&&(n=`"${o[n]}"`),c[f][t[0]]=n)}const l=Object.keys(c.params);c.original=[""].concat(l.map((e=>`${e}=${c.params[e]}`))).join(";"),c.specificity=l.length,void 0===c.q&&(c.q=1);const p=c.token.split("/");c.type=p[0],c.subtype=p[1],s[c.token]=c,c.q&&a.push(c)}return a.sort(r.sort),r.preferences(s,a,t)},r.normalize=function(e){const t={header:e=e||"*/*",quoted:{}};if(e.includes('"')){let r=0;t.header=e.replace(/="([^"]*)"/g,((e,n)=>{const o='"'+ ++r;return t.quoted[o]=n,"="+o}))}return t.header=t.header.replace(/[ \t]/g,""),t},r.sort=function(e,t){return t.q!==e.q?t.q-e.q:e.type!==t.type?r.innerSort(e,t,"type"):e.subtype!==t.subtype?r.innerSort(e,t,"subtype"):e.specificity!==t.specificity?t.specificity-e.specificity:e.pos-t.pos},r.innerSort=function(e,t,r){return"*"===e[r]?1:"*"===t[r]||e[r]<t[r]?-1:1},r.preferences=function(e,t,r){if(!r||!r.length)return t.map((e=>e.token+e.original));const n=Object.create(null),o=Object.create(null);let i=!1;for(const e of r){const t=e.toLowerCase();o[t]=e;const r=t.split("/"),a=r[0],s=r[1];"*"!==a?(n[a]=n[a]||Object.create(null),n[a][s]=e):(ce.assert("*"===s,"Invalid media type preference contains wildcard type with a subtype"),i=!0)}const a=[];for(const r of t){const t=r.token,{type:s,subtype:u}=e[t],c=n[s];if("*"!==s)if(i)a.push((o[t]||t)+r.original);else if("*"===u){if(c)for(const t of Object.keys(c))e[`${s}/${t}`]||a.push(c[t])}else{const e=o[t];(e||c&&c["*"])&&a.push((e||t)+r.original)}else{for(const t of Object.keys(o))e[t]||a.push(o[t]);i&&a.push("*/*")}}return a}})),de=H((function(e,t){const r={options:{charset:{type:"accept-charset"},encoding:{type:"accept-encoding",default:"identity",equivalents:new Map([["x-compress","compress"],["x-gzip","gzip"]])},language:{type:"accept-language",specificity:!0}}};for(const e in r.options)t[e]=(t,n)=>le.selection(t,n,r.options[e]),t[e+"s"]=(t,n)=>le.selections(t,n,r.options[e]);t.mediaType=(e,t)=>pe.selection(e,t),t.mediaTypes=(e,t)=>pe.selections(e,t),t.parseAll=function(e){return{charsets:t.charsets(e["accept-charset"]),encodings:t.encodings(e["accept-encoding"]),languages:t.languages(e["accept-language"]),mediaTypes:t.mediaTypes(e.accept)}}}));function he(e,t,r){let n;if(t){const[r,o]=e.split("?");n=`${r}?${t}${o?"&"+o:""}`}else n=e;const o=r.toString();return{status:o,statusDescription:v.STATUS_CODES[o],headers:{location:[{key:"Location",value:n}],refresh:308===r?[{key:"Refresh",value:"0;url="+n}]:[]}}}const me=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip","content-length","host","transfer-encoding","via"],ye=["x-amz-cf-","x-amzn-","x-edge-"];function ge(e){const t=e.toLowerCase();for(const e of ye)if(t.startsWith(e))return!0;return me.includes(t)}var ve=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},o=e.split(Ee),i=n.decode||we,a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");if(!(u<0)){var c=s.substr(0,u).trim(),f=s.substr(++u,s.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[c]&&(r[c]=xe(f,i))}}return r},be=function(e,t,r){var n=r||{},o=n.encode||Se;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!je.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!je.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(s)}if(n.domain){if(!je.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!je.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},we=decodeURIComponent,Se=encodeURIComponent,Ee=/; */,je=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function xe(e,t){try{return t(e)}catch(t){return e}}var Ce={parse:ve,serialize:be},Te=H((function(e,t){var r=b.default.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=b.default:(n(b.default,t),t.Buffer=o),o.prototype=Object.create(r.prototype),n(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return b.default.SlowBuffer(e)}})),Oe=Te.Buffer;function Re(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Oe.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=Oe.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}w.default.inherits(Re,m.default),Re.prototype.write=function(e){this.buffer=Oe.concat([this.buffer,Oe.from(e)]),this.emit("data",e)},Re.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var Ae=Re,Pe=b.default.Buffer,qe=b.default.SlowBuffer,ke=$e;function $e(e,t){if(!Pe.isBuffer(e)||!Pe.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}$e.install=function(){Pe.prototype.equal=qe.prototype.equal=function(e){return $e(this,e)}};var Be=Pe.prototype.equal,Ie=qe.prototype.equal;function Me(e){return(e/8|0)+(e%8==0?0:1)}$e.restore=function(){Pe.prototype.equal=Be,qe.prototype.equal=Ie};var Ne={ES256:Me(256),ES384:Me(384),ES512:Me(521)};var De=function(e){var t=Ne[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')},He=Te.Buffer;function _e(e){if(He.isBuffer(e))return e;if("string"==typeof e)return He.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Le(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}var Ue={derToJose:function(e,t){e=_e(e);var r=De(t),n=r+1,o=e.length,i=0;if(48!==e[i++])throw new Error('Could not find expected "seq"');var a=e[i++];if(129===a&&(a=e[i++]),o-i<a)throw new Error('"seq" specified length of "'+a+'", only "'+(o-i)+'" remaining');if(2!==e[i++])throw new Error('Could not find expected "int" for "r"');var s=e[i++];if(o-i-2<s)throw new Error('"r" specified length of "'+s+'", only "'+(o-i-2)+'" available');if(n<s)throw new Error('"r" specified length of "'+s+'", max of "'+n+'" is acceptable');var u=i;if(i+=s,2!==e[i++])throw new Error('Could not find expected "int" for "s"');var c=e[i++];if(o-i!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(o-i)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var f=i;if((i+=c)!==o)throw new Error('Expected to consume entire buffer, but "'+(o-i)+'" bytes remain');var l=r-s,p=r-c,d=He.allocUnsafe(l+s+p+c);for(i=0;i<l;++i)d[i]=0;e.copy(d,i,u+Math.max(-l,0),u+s);for(var h=i=r;i<h+p;++i)d[i]=0;return e.copy(d,i,f+Math.max(-p,0),f+c),d=(d=d.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=_e(e);var r=De(t),n=e.length;if(n!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+n+'"');var o=Le(e,0,r),i=Le(e,r,e.length),a=r-o,s=r-i,u=2+a+1+1+s,c=u<128,f=He.allocUnsafe((c?2:3)+u),l=0;return f[l++]=48,c?f[l++]=u:(f[l++]=129,f[l++]=255&u),f[l++]=2,f[l++]=a,o<0?(f[l++]=0,l+=e.copy(f,l,0,r)):l+=e.copy(f,l,o,r),f[l++]=2,f[l++]=s,i<0?(f[l++]=0,e.copy(f,l,r)):e.copy(f,l,r+i),f}},We=Te.Buffer,ze="secret must be a string or buffer",Fe="key must be a string or a buffer",Ge="function"==typeof S.default.createPublicKey;function Ke(e){if(!We.isBuffer(e)&&"string"!=typeof e){if(!Ge)throw Xe(Fe);if("object"!=typeof e)throw Xe(Fe);if("string"!=typeof e.type)throw Xe(Fe);if("string"!=typeof e.asymmetricKeyType)throw Xe(Fe);if("function"!=typeof e.export)throw Xe(Fe)}}function Ve(e){if(!We.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw Xe("key must be a string, a buffer or an object")}function Je(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ze(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Xe(e){var t=[].slice.call(arguments,1),r=w.default.format.bind(w.default,e).apply(null,t);return new TypeError(r)}function Qe(e){var t;return t=e,We.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function Ye(e){return function(t,r){!function(e){if(!We.isBuffer(e)){if("string"==typeof e)return e;if(!Ge)throw Xe(ze);if("object"!=typeof e)throw Xe(ze);if("secret"!==e.type)throw Xe(ze);if("function"!=typeof e.export)throw Xe(ze)}}(r),t=Qe(t);var n=S.default.createHmac("sha"+e,r);return Je((n.update(t),n.digest("base64")))}}function et(e){return function(t,r,n){var o=Ye(e)(t,n);return ke(We.from(r),We.from(o))}}function tt(e){return function(t,r){Ve(r),t=Qe(t);var n=S.default.createSign("RSA-SHA"+e);return Je((n.update(t),n.sign(r,"base64")))}}function rt(e){return function(t,r,n){Ke(n),t=Qe(t),r=Ze(r);var o=S.default.createVerify("RSA-SHA"+e);return o.update(t),o.verify(n,r,"base64")}}function nt(e){return function(t,r){Ve(r),t=Qe(t);var n=S.default.createSign("RSA-SHA"+e);return Je((n.update(t),n.sign({key:r,padding:S.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:S.default.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function ot(e){return function(t,r,n){Ke(n),t=Qe(t),r=Ze(r);var o=S.default.createVerify("RSA-SHA"+e);return o.update(t),o.verify({key:n,padding:S.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:S.default.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function it(e){var t=tt(e);return function(){var r=t.apply(null,arguments);return r=Ue.derToJose(r,"ES"+e)}}function at(e){var t=rt(e);return function(r,n,o){return n=Ue.joseToDer(n,"ES"+e).toString("base64"),t(r,n,o)}}function st(){return function(){return""}}function ut(){return function(e,t){return""===t}}Ge&&(Fe+=" or a KeyObject",ze+="or a KeyObject");var ct=function(e){var t={hs:Ye,rs:tt,ps:nt,es:it,none:st},r={hs:et,rs:rt,ps:ot,es:at,none:ut},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw Xe('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var o=(n[1]||n[3]).toLowerCase(),i=n[2];return{sign:t[o](i),verify:r[o](i)}},ft=b.default.Buffer,lt=function(e){return"string"==typeof e?e:"number"==typeof e||ft.isBuffer(e)?e.toString():JSON.stringify(e)},pt=Te.Buffer;function dt(e,t){return pt.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ht(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,o=e.encoding,i=ct(t.alg),a=function(e,t,r){r=r||"utf8";var n=dt(lt(e),"binary"),o=dt(lt(t),r);return w.default.format("%s.%s",n,o)}(t,r,o),s=i.sign(a,n);return w.default.format("%s.%s",a,s)}function mt(e){var t=e.secret||e.privateKey||e.key,r=new Ae(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new Ae(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}w.default.inherits(mt,m.default),mt.prototype.sign=function(){try{var e=ht({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},mt.sign=ht;var yt=mt,gt=Te.Buffer,vt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function bt(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function wt(e){var t=e.split(".",1)[0];return bt(gt.from(t,"base64").toString("binary"))}function St(e){return e.split(".")[2]}function Et(e){return vt.test(e)&&!!wt(e)}function jt(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var o=St(e=lt(e)),i=function(e){return e.split(".",2).join(".")}(e);return ct(t).verify(i,o,r)}function xt(e,t){if(t=t||{},!Et(e=lt(e)))return null;var r=wt(e);if(!r)return null;var n=function(e,t){t=t||"utf8";var r=e.split(".")[1];return gt.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:St(e)}}function Ct(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new Ae(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new Ae(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}w.default.inherits(Ct,m.default),Ct.prototype.verify=function(){try{var e=jt(this.signature.buffer,this.algorithm,this.key.buffer),t=xt(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},Ct.decode=xt,Ct.isValid=Et,Ct.verify=jt;var Tt=Ct,Ot={ALGORITHMS:["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],sign:yt.sign,verify:Tt.verify,decode:Tt.decode,isValid:Tt.isValid,createSign:function(e){return new yt(e)},createVerify:function(e){return new Tt(e)}},Rt=function(e,t){t=t||{};var r=Ot.decode(e,t);if(!r)return null;var n=r.payload;if("string"==typeof n)try{var o=JSON.parse(n);null!==o&&"object"==typeof o&&(n=o)}catch(e){}return!0===t.complete?{header:r.header,payload:n,signature:r.signature}:n},At=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(At.prototype=Object.create(Error.prototype)).constructor=At;var Pt=At,qt=function(e,t){Pt.call(this,e),this.name="NotBeforeError",this.date=t};(qt.prototype=Object.create(Pt.prototype)).constructor=qt;var kt=qt,$t=function(e,t){Pt.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};($t.prototype=Object.create(Pt.prototype)).constructor=$t;var Bt=$t,It=1e3,Mt=60*It,Nt=60*Mt,Dt=24*Nt,Ht=7*Dt,_t=365.25*Dt,Lt=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*_t;case"weeks":case"week":case"w":return r*Ht;case"days":case"day":case"d":return r*Dt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Nt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Mt;case"seconds":case"second":case"secs":case"sec":case"s":return r*It;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=Dt)return Ut(e,t,Dt,"day");if(t>=Nt)return Ut(e,t,Nt,"hour");if(t>=Mt)return Ut(e,t,Mt,"minute");if(t>=It)return Ut(e,t,It,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=Dt)return Math.round(e/Dt)+"d";if(t>=Nt)return Math.round(e/Nt)+"h";if(t>=Mt)return Math.round(e/Mt)+"m";if(t>=It)return Math.round(e/It)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ut(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}var Wt=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var n=Lt(e);if(void 0===n)return;return Math.floor(r+n/1e3)}return"number"==typeof e?r+e:void 0},zt=H((function(e,t){var r;t=e.exports=G,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=0,s=a++;i[s]="0|[1-9]\\d*";var u=a++;i[u]="[0-9]+";var c=a++;i[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;i[f]="("+i[s]+")\\.("+i[s]+")\\.("+i[s]+")";var l=a++;i[l]="("+i[u]+")\\.("+i[u]+")\\.("+i[u]+")";var p=a++;i[p]="(?:"+i[s]+"|"+i[c]+")";var d=a++;i[d]="(?:"+i[u]+"|"+i[c]+")";var h=a++;i[h]="(?:-("+i[p]+"(?:\\."+i[p]+")*))";var m=a++;i[m]="(?:-?("+i[d]+"(?:\\."+i[d]+")*))";var y=a++;i[y]="[0-9A-Za-z-]+";var g=a++;i[g]="(?:\\+("+i[y]+"(?:\\."+i[y]+")*))";var v=a++,b="v?"+i[f]+i[h]+"?"+i[g]+"?";i[v]="^"+b+"$";var w="[v=\\s]*"+i[l]+i[m]+"?"+i[g]+"?",S=a++;i[S]="^"+w+"$";var E=a++;i[E]="((?:<|>)?=?)";var j=a++;i[j]=i[u]+"|x|X|\\*";var x=a++;i[x]=i[s]+"|x|X|\\*";var C=a++;i[C]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[h]+")?"+i[g]+"?)?)?";var T=a++;i[T]="[v=\\s]*("+i[j]+")(?:\\.("+i[j]+")(?:\\.("+i[j]+")(?:"+i[m]+")?"+i[g]+"?)?)?";var O=a++;i[O]="^"+i[E]+"\\s*"+i[C]+"$";var R=a++;i[R]="^"+i[E]+"\\s*"+i[T]+"$";var A=a++;i[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var P=a++;i[P]="(?:~>?)";var q=a++;i[q]="(\\s*)"+i[P]+"\\s+",o[q]=new RegExp(i[q],"g");var k=a++;i[k]="^"+i[P]+i[C]+"$";var $=a++;i[$]="^"+i[P]+i[T]+"$";var B=a++;i[B]="(?:\\^)";var I=a++;i[I]="(\\s*)"+i[B]+"\\s+",o[I]=new RegExp(i[I],"g");var M=a++;i[M]="^"+i[B]+i[C]+"$";var N=a++;i[N]="^"+i[B]+i[T]+"$";var D=a++;i[D]="^"+i[E]+"\\s*("+w+")$|^$";var H=a++;i[H]="^"+i[E]+"\\s*("+b+")$|^$";var _=a++;i[_]="(\\s*)"+i[E]+"\\s*("+w+"|"+i[C]+")",o[_]=new RegExp(i[_],"g");var L=a++;i[L]="^\\s*("+i[C]+")\\s+-\\s+("+i[C]+")\\s*$";var U=a++;i[U]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var W=a++;i[W]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)r(z,i[z]),o[z]||(o[z]=new RegExp(i[z]));function F(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[v]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof G))return new G(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[v]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=F,t.valid=function(e,t){var r=F(e,t);return r?r.version:null},t.clean=function(e,t){var r=F(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),V(this.major,e.major)||V(this.minor,e.minor)||V(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return V(n,o)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var r=F(e),n=F(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=V;var K=/^[0-9]+$/;function V(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new G(e,r).compare(new G(t,r))}function Z(e,t,r){return J(e,t,r)>0}function X(e,t,r){return J(e,t,r)<0}function Q(e,t,r){return 0===J(e,t,r)}function Y(e,t,r){return 0!==J(e,t,r)}function ee(e,t,r){return J(e,t,r)>=0}function te(e,t,r){return J(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Q(e,r,n);case"!=":return Y(e,r,n);case">":return Z(e,r,n);case">=":return ee(e,r,n);case"<":return X(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return V(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=Z,t.lt=X,t.eq=Q,t.neq=Y,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,o,i,a,s,u,c,f,l,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(f)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+f+"-"+l:"<="+s)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var o,i,a,s,u;switch(e=new G(e,n),t=new ie(t,n),r){case">":o=Z,i=te,a=X,s=">",u=">=";break;case"<":o=X,i=ee,a=Z,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var f=t.set[c],l=null,p=null;if(f.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),l=l||e,p=p||e,o(e.semver,l.semver,n)?l=e:a(e.semver,p.semver,n)&&(p=e)})),l.operator===s||l.operator===u)return!1;if((!p.operator||p.operator===s)&&i(e,p.semver))return!1;if(p.operator===u&&a(e,p.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[D]:o[H],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||u},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[U]:o[L];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(o[_],"$1$2$3"),r("comparator trim",e,o[_]),e=(e=(e=e.replace(o[q],"$1~")).replace(o[I],"$1^")).split(/\s+/).join(" ");var i=t?o[D]:o[H],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[N]:o[M];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[$]:o[k];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[R]:o[O];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var u=ae(o),c=u||ae(i),f=c||ae(a);return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(c&&(i=0),a=0,">"===n?(n=">=",c?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",c?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):c?t=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[W],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a=a.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new G(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new G(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new G("0.0.0");if(e.test(r))return r;if(r=new G("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Z(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=F(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[A]);if(null==t)return null;return F(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})).satisfies(process.version,"^6.12.0 || >=8.0.0"),Ft=["RS256","RS384","RS512","ES256","ES384","ES512"],Gt=["RS256","RS384","RS512"],Kt=["HS256","HS384","HS512"];zt&&(Ft.splice(3,0,"PS256","PS384","PS512"),Gt.splice(3,0,"PS256","PS384","PS512"));var Vt=17976931348623157e292,Jt="[object GeneratorFunction]",Zt=/^\s+|\s+$/g,Xt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Yt=/^0o[0-7]+$/i,er=/^(?:0|[1-9]\d*)$/,tr=parseInt;function rr(e){return e!=e}function nr(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,(function(t){return e[t]}))}var or,ir,ar=Object.prototype,sr=ar.hasOwnProperty,ur=ar.toString,cr=ar.propertyIsEnumerable,fr=(or=Object.keys,ir=Object,function(e){return or(ir(e))}),lr=Math.max;function pr(e,t){var r=mr(e)||function(e){return function(e){return vr(e)&&yr(e)}(e)&&sr.call(e,"callee")&&(!cr.call(e,"callee")||"[object Arguments]"==ur.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!sr.call(e,i)||o&&("length"==i||hr(i,n))||r.push(i);return r}function dr(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||ar,t!==n)return fr(e);var t,r,n,o=[];for(var i in Object(e))sr.call(e,i)&&"constructor"!=i&&o.push(i);return o}function hr(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||er.test(e))&&e>-1&&e%1==0&&e<t}var mr=Array.isArray;function yr(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=gr(e)?ur.call(e):"";return"[object Function]"==t||t==Jt}(e)}function gr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function vr(e){return!!e&&"object"==typeof e}var br=function(e,t,r,n){var o;e=yr(e)?e:(o=e)?nr(o,function(e){return yr(e)?pr(e):dr(e)}(o)):[],r=r&&!n?function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||vr(e)&&"[object Symbol]"==ur.call(e)}(e))return NaN;if(gr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=gr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Zt,"");var r=Qt.test(e);return r||Yt.test(e)?tr(e.slice(2),r?2:8):Xt.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*Vt}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r):0;var i=e.length;return r<0&&(r=lr(i+r,0)),function(e){return"string"==typeof e||!mr(e)&&vr(e)&&"[object String]"==ur.call(e)}(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,rr,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r)>-1},wr=Object.prototype.toString;var Sr=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==wr.call(e)},Er=17976931348623157e292,jr=/^\s+|\s+$/g,xr=/^[-+]0x[0-9a-f]+$/i,Cr=/^0b[01]+$/i,Tr=/^0o[0-7]+$/i,Or=parseInt,Rr=Object.prototype.toString;function Ar(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var Pr=function(e){return"number"==typeof e&&e==function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Rr.call(e)}(e))return NaN;if(Ar(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ar(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jr,"");var r=Cr.test(e);return r||Tr.test(e)?Or(e.slice(2),r?2:8):xr.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*Er}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(e)};Object.prototype.toString;var qr=Function.prototype,kr=Object.prototype,$r=qr.toString,Br=kr.hasOwnProperty,Ir=$r.call(Object),Mr=kr.toString,Nr=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var Dr=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Mr.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Nr(e);if(null===t)return!0;var r=Br.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&$r.call(r)==Ir},Hr=Object.prototype.toString,_r=Array.isArray;var Lr=function(e){return"string"==typeof e||!_r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==Hr.call(e)};parseInt,Object.prototype.toString;var Ur=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];zt&&Ur.splice(3,0,"PS256","PS384","PS512");br.bind(null,Ur);var Wr=function(e,t,r,n){var o;if("function"!=typeof r||n||(n=r,r={}),r||(r={}),r=Object.assign({},r),o=n||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return o(new Pt("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return o(new Pt("nonce must be a non-empty string"));var i=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return o(new Pt("jwt must be provided"));if("string"!=typeof e)return o(new Pt("jwt must be a string"));var a,s=e.split(".");if(3!==s.length)return o(new Pt("jwt malformed"));try{a=Rt(e,{complete:!0})}catch(e){return o(e)}if(!a)return o(new Pt("invalid token"));var u,c=a.header;if("function"==typeof t){if(!n)return o(new Pt("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(e,r){return r(null,t)};return u(c,(function(t,n){if(t)return o(new Pt("error in secret or public key callback: "+t.message));var u,f=""!==s[2].trim();if(!f&&n)return o(new Pt("jwt signature is required"));if(f&&!n)return o(new Pt("secret or public key must be provided"));if(f||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~n.toString().indexOf("BEGIN CERTIFICATE")||~n.toString().indexOf("BEGIN PUBLIC KEY")?Ft:~n.toString().indexOf("BEGIN RSA PUBLIC KEY")?Gt:Kt),!~r.algorithms.indexOf(a.header.alg))return o(new Pt("invalid algorithm"));try{u=Ot.verify(e,a.header.alg,n)}catch(e){return o(e)}if(!u)return o(new Pt("invalid signature"));var l=a.payload;if(void 0!==l.nbf&&!r.ignoreNotBefore){if("number"!=typeof l.nbf)return o(new Pt("invalid nbf value"));if(l.nbf>i+(r.clockTolerance||0))return o(new kt("jwt not active",new Date(1e3*l.nbf)))}if(void 0!==l.exp&&!r.ignoreExpiration){if("number"!=typeof l.exp)return o(new Pt("invalid exp value"));if(i>=l.exp+(r.clockTolerance||0))return o(new Bt("jwt expired",new Date(1e3*l.exp)))}if(r.audience){var p=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(l.aud)?l.aud:[l.aud]).some((function(e){return p.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return o(new Pt("jwt audience invalid. expected: "+p.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&l.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(l.iss)))return o(new Pt("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&l.sub!==r.subject)return o(new Pt("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&l.jti!==r.jwtid)return o(new Pt("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&l.nonce!==r.nonce)return o(new Pt("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof l.iat)return o(new Pt("iat required when maxAge is specified"));var d=Wt(r.maxAge,l.iat);if(void 0===d)return o(new Pt('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=d+(r.clockTolerance||0))return o(new Bt("maxAge exceeded",new Date(1e3*d)))}if(!0===r.complete){var h=a.signature;return o(null,{header:c,payload:l,signature:h})}return o(null,l)}))};const zr={__prerender_bypass:"",__next_preview_data:""},Fr=e=>(e||[]).reduce(((e,t)=>{const r=Ce.parse(t.value);return Gr(r)?r:e}),zr),Gr=e=>!(!e.__next_preview_data||!e.__prerender_bypass);const Kr=async()=>{const{defaultRetryDecider:e,StandardRetryStrategy:t}=await Promise.resolve().then((function(){return require("./index-9d95f152.js")}));return new t((async()=>3),{retryDecider:t=>"code"in t&&("ECONNRESET"===t.code||"EPIPE"===t.code||"ETIMEDOUT"===t.code)||e(t)})},Vr=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip"],Jr=["x-amz-cf-","x-amzn-","x-edge-"];function Zr(e){const t=e.toLowerCase();for(const e of Jr)if(t.startsWith(e))return!0;return Vr.includes(t)}const Xr=h.default.basePath,Qr=e=>e?{now:()=>a.performance.now(),log:(e,t,r)=>{t&&r&&console.log(`${e}: ${r-t} (ms)`)}}:{now:()=>0,log:()=>{}},Yr=(e,t)=>{e.headers.host=[{key:"host",value:t}]},en=e=>e.startsWith("/_next/data"),tn=(e,t)=>{var r,n;if(Xr){if(!e.startsWith(Xr))return(null===(r=t.i18n)||void 0===r?void 0:r.defaultLocale)?`/${null===(n=t.i18n)||void 0===n?void 0:n.defaultLocale}/404`:"/404";e=e.slice(Xr.length)}return e.endsWith("/")&&(e=e.slice(0,-1)),""===e?"/":e},rn=(e,t)=>{let r=e.replace("/_next/data/"+t.buildId,"").replace(".json","");return r=["/index",""].includes(r)?"/":r,r},nn=(e,t)=>{const{pages:{ssr:r,html:n}}=e,o={...r.dynamic,...n.dynamic};return i=>{let a=i;if(en(i)&&(a=rn(a,e)),r.nonDynamic[a])return r.nonDynamic[a];if(n.nonDynamic[a])return n.nonDynamic[a];for(const e in o){const{file:t,regex:r}=o[e];if(new RegExp(r,"i").test(a))return t}for(const e in r.catchAll){const{file:t,regex:n}=r.catchAll[e];if(new RegExp(n,"i").test(a))return t}return void 0!==n.nonDynamic["/404"]?`pages${D(i,t)}/404.html`:"pages/_error.js"}},on=(e,t)=>{var r;const n=null===(r=t.i18n)||void 0===r?void 0:r.locales;if(n)for(const t of n){if(e.uri===`${Xr}/${t}`){e.uri="/",e.querystring+=`${""===e.querystring?"":"&"}nextInternalLocale=${t}`,delete e.headers["accept-language"];break}if(e.uri.startsWith(`${Xr}/${t}/`)){e.uri=e.uri.replace(`${Xr}/${t}/`,Xr+"/"),e.querystring+=`${""===e.querystring?"":"&"}nextInternalLocale=${t}`,delete e.headers["accept-language"];break}}},an=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var o,i;const a=e.Records[0].cf.request,s=a.headers.authorization,u=function(e,t){if(t&&t.username&&t.password&&e!=="Basic "+Buffer.from(t.username+":"+t.password).toString("base64"))return{status:"401",statusDescription:"Unauthorized",body:"Unauthorized",headers:{"www-authenticate":[{key:"WWW-Authenticate",value:"Basic"}]}};return null}(s?s[0].value:null,t.authentication);if(u)return u;const c=function(e,t){const r=e.headers.host;if(r&&r.length>0){const n=r[0].value,o=t.domainRedirects;if(o&&o[n])return`${o[n]}${e.uri}`}return null}(a,t);if(c)return he(c,a.querystring,308);const f=n.basePath;let l=tn(a.uri,n);const p=decodeURI(l),{pages:d,publicFiles:h}=t;let m=h[p],y=en(l),g=a.uri;if(y||m)g.endsWith("/")&&(g=g.slice(0,-1));else if(/^\/[^/]/.test(a.uri)&&!l.endsWith("/404")){const e=t.trailingSlash;!e&&g.endsWith("/")&&(g=g.slice(0,-1)),e&&!g.endsWith("/")&&(g+="/")}if(g!==a.uri)return he(g,a.querystring,308);const v=function(e,t){e=M(e,t);const r=t.redirects;for(const t of r){const r=B(e,t.source);if(r){const e=I(t.destination,r.params);return e?{redirectPath:e,statusCode:t.statusCode}:null}}return null}(a.uri,n);if(v)return he(v.redirectPath,a.querystring,v.statusCode);const b=a.headers["accept-language"],w=function(e,t,r,n){if("/"===t&&e&&r.i18n){const t=r.i18n.locales,o=r.i18n.defaultLocale,i=r.basePath,a=de.language(e);let s=void 0;for(const e of t)if(a.toLowerCase()===e.toLowerCase()){s=e;break}return s&&s!==o?`${i}/${s}${n.trailingSlash?"/":""}`:void 0}}(b?b[0].value:void 0,l,n,t);if(w)return he(w,a.querystring,307);const S=null===(o=n.i18n)||void 0===o?void 0:o.defaultLocale;!S||N(l,n)||m||y||(l="/"===l?"/"+S:`/${S}${l}`);let E;if(!(d.html.nonDynamic[l]||d.ssr.nonDynamic[l]||m)&&!y){const r=function(e,t,r,n){e=M(e,t);const o=t.rewrites;for(const i of o){const o=B(e,i.source);if(o){let a=I(i.destination,o.params);if(e===a){const e=r(n);if("pages/404.html"===e||"pages/_error.js"===e)continue}if(a&&N(e,t)){const e=Object.keys(o.params).filter((e=>"nextInternalLocale"!==e)).map((e=>{const t=o.params[e];return"string"==typeof t?`${e}=${t}`:t.map((t=>`${e}=${t}`)).join("&")})).filter((e=>e)).join("&");e&&(a+=a.includes("?")?"&"+e:"?"+e)}return a}}return null}(a.uri,n,nn(t,n),l);if(r){E=a.uri;const[o,s]=r.split("?");if(a.uri=o,a.querystring?a.querystring=`${a.querystring}${s?"&"+s:""}`:a.querystring=""+(null!=s?s:""),function(e){return e.startsWith("http://")||e.startsWith("https://")}(o)){const{req:r,res:n,responsePromise:s}=T(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression});return await async function(e,t,r,n){const{default:o}=await Promise.resolve().then((function(){return require("./index-9e574644.js")}));let i,a={};if(Object.assign(a,t.headers),a.hasOwnProperty("host")&&delete a.host,n){const r=Buffer.from(n,"base64").toString("utf8");i=await o(e,{headers:a,method:t.method,body:r,compress:!1,redirect:"manual"})}else i=await o(e,{headers:a,method:t.method,compress:!1,redirect:"manual"});for(const[e,t]of i.headers.entries())ge(e)||r.setHeader(e,t);r.statusCode=i.status,r.end(await i.buffer())}(o+(a.querystring?"?":"")+a.querystring,r,n,null===(i=a.body)||void 0===i?void 0:i.data),await s}l=tn(a.uri,n),!S||N(l,n)||m||y||(l="/"===l?"/"+S:`/${S}${l}`)}}const j=d.html.nonDynamic[l],x=d.ssg.nonDynamic[l],C=a.origin.s3,O=j||x,R=(e=>{if("us-east-1"===e.region)return e.domainName;if(!e.domainName.includes(e.region))return e.domainName.replace("s3.amazonaws.com",`s3.${e.region}.amazonaws.com`);return e.domainName})(C),A=cn(l,t,n),{now:P,log:q}=Qr(t.logLambdaExecutionTimes),k=((e,t)=>{const r=Fr(e);if(Gr(r))try{return Wr(r.__next_preview_data,t),!0}catch(e){console.warn("Found preview headers without valid authentication token")}return!1})(a.headers.cookie,r.preview.previewModeSigningKey);C.domainName=R;e:if(m||j||O&&!k||A&&!k||y&&!k){if(m)C.path=f+"/public",f&&(a.uri=a.uri.replace(f,""));else if(O||A){C.path=`${f}/static-pages/${t.buildId}`;const e="/"===l?"/index":l;a.uri=e+".html"}else if(y){const e=rn(l,t),r=nn(t,n)(e);if(r.endsWith("/404.html"))C.path=`${f}/static-pages/${t.buildId}`,a.uri=r.replace("pages","");else{if("pages/_error.js"===r||!d.ssg.nonDynamic[e]&&!cn(e,t,n))break e;C.path=f,a.uri=l}}return Yr(a,R),a}const $=nn(t,n)(l);if($.endsWith(".html")&&!k)return C.path=`${f}/static-pages/${t.buildId}`,a.uri=$.replace("pages",""),Yr(a,R),a;const D=P();let H=require("./"+$);q("require JS execution time",D,P());const _=P();on(a,n);const{req:L,res:U,responsePromise:W}=T(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression,rewrittenUri:E});try{if("pages/_error.js"===$&&(U.statusCode=404),y){const{renderOpts:e}=await H.renderReqToHTML(L,U,"passthrough");U.setHeader("Content-Type","application/json"),U.end(JSON.stringify(e.pageData))}else await Promise.race([H.render(L,U),W])}catch(e){console.error(`Error rendering page: ${$}. Error:\n${e}\nRendering Next.js error page.`),U.statusCode=500,H=require("./pages/_error.js"),await H.render(L,U)}const z=await W;return q("SSR execution time",_,P()),fn(z,U),z},sn=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var o,i,a;const s=e.Records[0].cf.response,u=e.Records[0].cf.request,{uri:c}=u,{status:f}=s;if("403"!==f)return c.endsWith("/404.html")&&(s.status="404",s.statusDescription="Not Found"),s;if("PUT"===u.method||"DELETE"===u.method)return s;const{domainName:l,region:p}=u.origin.s3,d=l.replace(`.s3.${p}.amazonaws.com`,""),{S3Client:h}=await Promise.resolve().then((function(){return require("./S3Client-0d7fc8e1.js")})),m=new h({region:null===(i=null===(o=u.origin)||void 0===o?void 0:o.s3)||void 0===i?void 0:i.region,maxAttempts:3,retryStrategy:await Kr()}),y=Xr?Xr.replace(/^\//,"")+"/":"";let g;const v=Object.values(t.pages.ssg.dynamic).find((e=>new RegExp(e.routeRegex).test(c))),b=null===(null==v?void 0:v.fallback);if(!en(c)&&!b||(g=nn(t,n)(c)).endsWith(".html")){if(!v)return s;const r=D(c,n),o=`${y}static-pages/${t.buildId}${v.fallback||r+"/404.html"}`;if(v.fallback||((e,t)=>t.pages.html.nonDynamic[e]||t.pages.ssg.nonDynamic[e])(r+"/404",t)){const{GetObjectCommand:e}=await Promise.resolve().then((function(){return require("./GetObjectCommand-36b403be.js")})),t=await Promise.resolve().then((function(){return require("./index-891c56ba.js")})).then((function(e){return e.index})),r={Bucket:d,Key:o},n=await m.send(new e(r)),i=await t.default(n.Body);return{status:v.fallback?"200":"404",statusDescription:v.fallback?"OK":"Not Found",headers:{...s.headers,"content-type":[{key:"Content-Type",value:"text/html"}],"cache-control":[{key:"Cache-Control",value:null!==(a=n.CacheControl)&&void 0!==a?a:v.fallback?"public, max-age=0, s-maxage=0, must-revalidate":"public, max-age=0, s-maxage=2678400, must-revalidate"}]},body:i}}{const{req:r,res:n}=T(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),o=require("./pages/_error.js"),{html:i}=await o.renderReqToHTML(r,n,"passthrough");return{status:"404",statusDescription:"Not Found",headers:{...s.headers,"content-type":[{key:"Content-Type",value:"text/html"}]},body:i}}}{const r=require("./"+g);c.endsWith(".html")&&(u.uri=c.slice(0,c.length-5),t.trailingSlash&&(u.uri+="/"));const{req:n,res:o,responsePromise:i}=T(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),a=!!r.getStaticProps,{renderOpts:f,html:l}=await r.renderReqToHTML(n,o,"passthrough");if(a){const e=c.replace(/^\//,"").replace(/\.(json|html)$/,"").replace(/^_next\/data\/[^\/]*\//,""),r=`_next/data/${t.buildId}/${e}.json`,n=`static-pages/${t.buildId}/${e}.html`,o={Bucket:d,Key:`${y}${r}`,Body:JSON.stringify(f.pageData),ContentType:"application/json",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},i={Bucket:d,Key:`${y}${n}`,Body:l,ContentType:"text/html",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},{PutObjectCommand:a}=await Promise.resolve().then((function(){return require("./PutObjectCommand-5e61ab3e.js")}));await Promise.all([m.send(new a(o)),m.send(new a(i))])}const p={};return Object.entries(s.headers).map((([e,t])=>{p[e]=t.map((({value:e})=>e))})),o.writeHead(200,p),o.setHeader("Cache-Control","public, max-age=0, s-maxage=2678400, must-revalidate"),en(c)?(o.setHeader("Content-Type","application/json"),o.end(JSON.stringify(f.pageData))):(o.setHeader("Content-Type","text/html"),o.end(l)),await i}},un=e=>"origin-response"===e.Records[0].cf.config.eventType,cn=(e,t,r)=>{const{pages:{ssr:n,html:o,ssg:i}}=t;if(n.nonDynamic[e]||o.nonDynamic[e])return!1;let a=void 0;return!Object.values({...n.dynamic,...o.dynamic}).find((t=>{if(a)return!1;if(new RegExp(t.regex).test(e)){return!Object.keys(i.dynamic).find((e=>{const n=t.file===`pages${function(e,t){if(t.i18n)for(const r of t.i18n.locales){if(e==="/"+r)return"/";if(e.startsWith(`/${r}/`))return e.replace("/"+r,"")}return e}(e,r)}.js`;return n&&(a=i.dynamic[e]),n}))}return!1}))&&(a||Object.values(i.dynamic).find((t=>new RegExp(t.routeRegex).test(e))))},fn=(e,t)=>{404==t.statusCode?(e.status="404",e.statusDescription="Not Found"):500==t.statusCode&&(e.status="500",e.statusDescription="Internal Server Error")};exports.createCommonjsModule=H,exports.handler=async e=>{const t=d.default;let r;const n=p.default,o=h.default,{now:i,log:a}=Qr(t.logLambdaExecutionTimes),s=i();if(r=un(e)?await sn({event:e,manifest:t,prerenderManifest:n,routesManifest:o}):await an({event:e,manifest:t,prerenderManifest:n,routesManifest:o}),r.hasOwnProperty("status")){!function(e,t,r){if(e=M(e,r),t.headers)for(const n of r.headers)if(B(e,n.source))for(const e of n.headers)if(e.key&&e.value){const r=e.key.toLowerCase();t.headers[r]=[{key:r,value:e.value}]}}(e.Records[0].cf.request.uri,r,o)}r.headers&&function(e){for(const t in e)Zr(t)&&delete e[t]}(r.headers);return a("handler execution time",s,i()),r};
